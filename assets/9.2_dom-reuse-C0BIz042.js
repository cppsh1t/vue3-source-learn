import{i as _}from"./util-B7zk4-Xm.js";import{s as T}from"./async-B8FjgEV9.js";function w(){return{createElement:function(r){return document.createElement(r)},setElementText:function(r,i){r.textContent=i},insert:function(r,i,l){i.appendChild(r)},patchProps:function(r,i,l,c){const h=r,{is:E,type:m}=R(i);if(E){let f=(r._eventInvoker||(r._eventInvoker={}))[i];c?f?f.value=c:(f=r._eventInvoker[i]=y=>{y.timeStamp<f.attached||(Array.isArray(f.value)?f.value.forEach(d=>d(y)):f.value(y))},f.value=c,f.attached=performance.now(),r.addEventListener(m,f)):f&&r.removeEventListener(m,f)}else i==="class"?r.className=c||"":I(r,i)?typeof h[i]==="boolean"&&c===""?h[i]=!0:h[i]=c:r.setAttribute(i,c)},createText(r){return document.createTextNode(r)},setText(r,i){r.nodeValue=i},createComment(r){return document.createComment(r)}}}const P=w();function I(r,i,l){return i==="form"&&r.tagName==="INPUT"?!1:i in r}function R(r){const i=/^\$on/.test(r),l=i?r.slice(3).toLowerCase():void 0;return{is:i,type:l}}function p(r){var l;if(r.type==="fragment"){r.children.forEach(p);return}const i=(l=r._vnode)==null?void 0:l.el;if(i){const c=i==null?void 0:i.parentNode;c&&c.removeChild(i)}}function b(r=P){const{createElement:i,insert:l,setElementText:c,patchProps:h,createText:E,setText:m,createComment:v}=r;function f(e,t){const s=e.el=i(e.type);if(typeof e.children=="string"?c(s,e.children):Array.isArray(e.children)&&e.children.forEach(n=>u(void 0,n,s)),e.props)for(const n in e.props)h(s,n,void 0,e.props[n]);l(s,t)}function y(e,t){const s=t.el=e.el,n=e.props??{},a=t.props??{};for(const o in a)a[o]!==n[o]&&h(s,o,n[o],a[o]);for(const o in n)o in a||h(s,o,n[o],void 0);d(e,t,s)}function d(e,t,s){if(typeof t.children=="string")Array.isArray(e.children)&&e.children.forEach(n=>p(n)),c(s,t.children);else if(Array.isArray(t.children))if(Array.isArray(e.children)){const n=e.children,a=t.children;for(let o=0;o<a.length;o++){const C=a[o];for(let A=0;A<n.length;A++){const g=n[A];if(C.key===g.key){u(g,C,s);break}}}}else c(s,""),t.children.forEach(n=>u(void 0,n,s));else Array.isArray(e.children)?e.children.forEach(n=>p(n)):typeof e.children=="string"&&c(s,"")}function u(e,t,s){if(e&&e.type!==t.type&&(p(e),e=void 0),t.type==="text")if(e){const n=t.el=e.el;t.children!==e.children&&n&&m(n,t.children)}else{const n=t.el=E(t.children);l(n,s)}else if(t.type==="comment")if(e){if(t.el=e.el,t.children!==e.children){p(e);const n=t.el=v(t.children);l(n,s)}}else{const n=t.el=v(t.children);l(n,s)}else t.type==="fragment"?e?d(e,t,s):t.children.forEach(n=>u(void 0,n,s)):typeof t.type=="string"?e?y(e,t):f(t,s):t.type}function k(e,t){e?u(t._vnode,e,t):t._vnode&&p(t._vnode),t._vnode=e}return{render:k}}const O={name:"9.2_dom-reuse",doRender:function(){const r=_(),{render:i}=b(),l={type:"div",children:[{type:"p",children:"1",key:1},{type:"p",children:"2",key:2},{type:"p",children:"hello",key:3}]},c={type:"div",children:[{type:"p",children:"world",key:3},{type:"p",children:"1",key:1},{type:"p",children:"2",key:2}]};i(l,r),T(300).then(()=>i(c,r))}};export{b as createRenderer,w as getDefaultRenderOption,O as rendererItem};
