import{i as P}from"./util-B7zk4-Xm.js";const m=Symbol(),M=Symbol(),A=new WeakMap;let l;const b=[];function I(t,r={}){const n=()=>{R(n),l=n,b.push(n);const e=t();return b.pop(),l=b[b.length-1],e};return n.options=r,n.deps=[],r.lazy||n(),n}function E(t,r){if(!l||!S)return;let n=A.get(t);n||A.set(t,n=new Map);let e=n.get(r);e||n.set(r,e=new Set),e.add(l),l.deps.push(e)}function y(t,r,n,e="SET"){const o=A.get(t);if(!o)return;const f=o.get(r),a=new Set;if(f&&f.forEach(i=>{i!==l&&a.add(i)}),e==="ADD"||e==="DELETE"||e==="SET"&&Object.prototype.toString.call(t)==="[object Map]"){const i=o.get(m);i&&i.forEach(c=>{c!==l&&a.add(c)})}if((e==="ADD"||e==="DELETE")&&Object.prototype.toString.call(t)==="[object Map]"){const i=o.get(M);i&&i.forEach(c=>{c!==l&&a.add(c)})}if(e==="ADD"&&Array.isArray(t)){const i=o.get("length");i&&i.forEach(c=>{c!==l&&a.add(c)})}Array.isArray(t)&&r==="length"&&o.forEach((i,c)=>{c>=n&&i.forEach(s=>{s!==l&&a.add(s)})}),a.forEach(i=>{i.options.scheduler?i.options.scheduler(i):i()})}function R(t){for(let r=0;r<t.deps.length;r++)t.deps[r].delete(t);t.deps.length=0}function x(t,r){return Array.isArray(t)?Number(r)<t.length?"SET":"ADD":Object.prototype.hasOwnProperty.call(t,r)?"SET":"ADD"}let S=!0;const g=(()=>{const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{const n=Array.prototype[r];t[r]=function(...e){let o=n.apply(this,e);return(o===!1||o===-1)&&(o=n.apply(this.raw,e)),o}}),["push","pop","shift","unshift","splice"].forEach(r=>{const n=Array.prototype[r];t[r]=function(...e){S=!1;let o=n.apply(this,e);return S=!0,o}}),t})(),j={[Symbol.iterator](...t){return this.iterationMethod(t)},entries(...t){return this.iterationMethod(t)},values(...t){return this.valuesIterationMethod(t)},keys(){return this.keysIterationMethod()},add(t){const r=this.raw,n=r.has(t),e=r.add(t);return n||y(r,t,void 0,"ADD"),e},delete(t){const r=this.raw,n=r.has(t),e=r.delete(t);return n&&y(r,t,void 0,"DELETE"),e},get(t){const r=this.raw,n=r.has(t);if(E(r,t),n){const e=r.get(t);return typeof e=="object"?v(e):e}},set(t,r){const n=this.raw,e=n.has(t),o=n.get(t),f=r.raw||r;n.set(t,f),e?(o!==r||o===o&&r===r)&&y(n,t,void 0,"SET"):y(n,t,void 0,"ADD")},forEach(t,r){const n=o=>typeof o=="object"?v(o):o,e=this.raw;E(e,m),e.forEach((o,f)=>{t.call(r,n(o),n(f),this)})},iterationMethod(){const t=this.raw,r=t[Symbol.iterator](),n=e=>typeof e=="object"&&e!==null?v(e):e;return E(t,m),{[Symbol.iterator](){return this},next(){const{value:e,done:o}=r.next();return{value:e&&[n(e[0]),n(e[1])],done:o}}}},valuesIterationMethod(){const t=this.raw,r=t.values(),n=e=>typeof e=="object"?v(e):e;return E(t,m),{next(){const{value:e,done:o}=r.next();return{value:n(e),done:o}},[Symbol.iterator](){return this}}},keysIterationMethod(){const t=this.raw,r=t.keys(),n=e=>typeof e=="object"?v(e):e;return E(t,M),{next(){const{value:e,done:o}=r.next();return{value:n(e),done:o}},[Symbol.iterator](){return this}}}};function _(t,r=!1,n=!1){return new Proxy(t,{get(e,o,f){if(o==="raw")return e;if(e instanceof Set||e instanceof Map)return o==="size"?(E(e,m),Reflect.get(e,o,e)):j[o];if(Array.isArray(e)&&g.hasOwnProperty(o))return Reflect.get(g,o,f);!n&&typeof o!="symbol"&&E(e,o);const a=Reflect.get(e,o,f);return r?a:typeof a=="object"&&a!==null?n?O(a):v(a):a},set(e,o,f,a){if(n)return console.warn(`${String(o)} is readonly!`),!0;const i=e[o],c=x(e,o),s=Reflect.set(e,o,f,a);return e===a.raw&&i!==f&&(i===i||f===f)&&y(e,o,f,c),s},has(e,o){return E(e,o),Reflect.has(e,o)},ownKeys(e){return E(e,Array.isArray(e)?"length":m),Reflect.ownKeys(e)},deleteProperty(e,o){if(n)return console.warn(`${String(o)} is readonly!`),!0;const f=Object.prototype.hasOwnProperty.call(e,o),a=Reflect.deleteProperty(e,o);return a&&f&&y(e,o,void 0,"DELETE"),a}})}const T=new Map;function v(t){const r=T.get(t);if(r)return r;const n=_(t,!1,!1);return T.set(t,n),n}function O(t){return _(t,!1,!0)}function C(t){const r={value:t};return Object.defineProperty(r,"__v_isRef",{value:!0}),v(r)}function K(){return{createElement:function(t){return document.createElement(t)},setElementText:function(t,r){t.textContent=r},insert:function(t,r,n){r.appendChild(t)},patchProps:function(t,r,n,e){const o=t,{is:f,type:a}=N(r);if(f){let c=(t._eventInvoker||(t._eventInvoker={}))[r];e?c?c.value=e:(c=t._eventInvoker[r]=s=>{s.timeStamp<c.attached||(Array.isArray(c.value)?c.value.forEach(u=>u(s)):c.value(s))},c.value=e,c.attached=performance.now(),t.addEventListener(a,c)):c&&t.removeEventListener(a,c)}else r==="class"?t.className=e||"":$(t,r)?typeof o[r]==="boolean"&&e===""?o[r]=!0:o[r]=e:t.setAttribute(r,e)}}}const L=K();function $(t,r,n){return r==="form"&&t.tagName==="INPUT"?!1:r in t}function N(t){const r=/^\$on/.test(t),n=r?t.slice(3).toLowerCase():void 0;return{is:r,type:n}}function D(t){const r=t._vnode.el,n=r.parentNode;n&&n.removeChild(r)}function Y(t=L){const{createElement:r,insert:n,setElementText:e,patchProps:o}=t;function f(s,u){const p=s.el=r(s.type);if(typeof s.children=="string"?e(p,s.children):Array.isArray(s.children)&&s.children.forEach(d=>i(void 0,d,p)),s.props)for(const d in s.props)o(p,d,void 0,s.props[d]);n(p,u)}function a(s,u){const p=u.el=s.el,d=s.props??{},w=u.props??{};for(const h in w)w[h]!==d[h]&&o(p,h,d[h],w[h]);for(const h in d)h in w||o(p,h,d[h],null)}function i(s,u,p){s&&s.type!==u.type&&(D(s),s=void 0),typeof u.type=="string"?s?a(s,u):f(u,p):typeof u.type=="object"||u.type}function c(s,u){s?i(u._vnode,s,u):u._vnode&&D(u._vnode),u._vnode=s}return{render:c}}const U={name:"8.8_event-bubble",doRender:function(){const t=P(),{render:r}=Y(),n=C(!1);I(()=>{const e={type:"div",props:n.value?{$onClick:()=>{alert("父元素 clicked")}}:{},children:[{type:"p",props:{$onClick:()=>{n.value=!0}},children:"text"}]};r(e,t)})}};export{Y as createRenderer,K as getDefaultRenderOption,U as rendererItem};
